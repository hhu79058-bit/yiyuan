<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒ»ç”Ÿå·¥ä½œå°</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background-color: #f5f7fa; }
        .header { background: white; padding: 20px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #409EFF; color: white; }
        tr:hover { background-color: #f9f9f9; }

        .btn-start { background-color: #67C23A; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 14px; cursor: pointer; border: none;}
        .status-processing { color: #67C23A; font-weight: bold; }
        .status-waiting { color: #E6A23C; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ‘¨â€âš•ï¸ {{ doctor_name }}çš„å·¥ä½œå°</h1>
        <div>
            <a href="/registration/manage" style="margin-right:12px; color:#409eff; text-decoration:none;">æŒ‚å·ç®¡ç†</a>
            <a href="/pharmacy" style="margin-right:12px; color:#409eff; text-decoration:none;">è¯æˆ¿ç®¡ç†</a>
            <a href="/cashier" style="margin-right:12px; color:#409eff; text-decoration:none;">æ”¶é“¶å°</a>
            <a href="/logout" style="color: red; text-decoration: none;">é€€å‡ºç™»å½•</a>
        </div>
    </div>

    <h3>ğŸ“‹ å®æ—¶å€™è¯Šåˆ—è¡¨</h3>

    {% if patients %}
    <table>
        <thead>
            <tr>
                <th>æ’é˜Ÿå·</th>
                <th>å§“å</th>
                <th>æ€§åˆ«</th>
                <th>å¹´é¾„</th>
                <th>çŠ¶æ€</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {% for p in patients %}
            <tr style="background-color: {{ '#f0f9eb' if p.visit_status == 'å°±è¯Šä¸­' else 'white' }}">
                <td><strong style="font-size:1.2em;">{{ p.queue_num }}</strong></td>
                <td>{{ p.patient_name }}</td>
                <td>{{ p.gender }}</td>
                <td>{{ p.age }}å²</td>
                <td>
                    {% if p.visit_status == 'å°±è¯Šä¸­' %}
                        <span class="status-processing">æ­£åœ¨å°±è¯Š...</span>
                    {% else %}
                        <span class="status-waiting">ç­‰å¾…ä¸­</span>
                    {% endif %}
                </td>
                <td>
                    {% if p.visit_status == 'æœªå°±è¯Š' %}
                        <a href="/start_consult/{{ p.reg_id }}" class="btn-start">æ¥è¯Š</a>
                    {% else %}
                        <button disabled style="color:#999; border:none; background:none;">æ¥è¯Šä¸­</button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div style="text-align:center; padding:50px; color:#999;">
            <h3>å½“å‰æ²¡æœ‰å¾…è¯Šæ‚£è€…</h3>
            <p>æ‚¨å¯ä»¥ä¼‘æ¯ä¸€ä¸‹ï¼Œå–æ¯å’–å•¡ â˜•</p>
        </div>
    {% endif %}
</body>
</html>
