{% extends "base.html" %}
{% block title %}统一登录 - 诊疗通{% endblock %}

{% block extra_head %}
    <style>
        body {
            background:
                radial-gradient(900px 450px at 20% 20%, rgba(47,125,246,.16), transparent 55%),
                radial-gradient(900px 450px at 80% 25%, rgba(245,158,11,.10), transparent 55%),
                linear-gradient(180deg, rgba(246,248,252,.72), rgba(246,248,252,.72)),
                url("{{ url_for('static', filename='login-bg-v2.svg') }}") center/cover no-repeat fixed;
        }
        .login-shell{max-width:420px;margin:0 auto;padding:40px 0}
        .login-card{padding:22px}
        .role-switch{display:flex;background:#f3f4f6;border:1px solid var(--border);border-radius:999px;overflow:hidden}
        .role-switch input{display:none}
        .role-switch label{flex:1;text-align:center;padding:10px 12px;cursor:pointer;color:#6b7280;font-weight:800}
        .role-switch input:checked + label{background:#eaf2ff;color:var(--primary)}
        .login-actions{margin-top:14px}
        .hint{font-size:12px;color:var(--muted);margin-top:10px}
    </style>
{% endblock %}

{% block content %}
    <div class="login-shell">
        <div class="card login-card">
            <div class="page-title" style="margin-bottom:4px;">
                <div>
                    <h2 style="margin:0;">统一登录</h2>
                    <div class="subtitle">诊疗通门诊系统</div>
                </div>
            </div>

            {% if error %}
                <div class="flash flash--error">{{ error }}</div>
            {% endif %}

            <form method="POST" action="{{ url_for('auth.login') }}">
                <label>选择身份</label>
                <div class="role-switch">
                    <input type="radio" id="role_patient" name="role" value="patient" checked>
                    <label for="role_patient">患者</label>

                    <input type="radio" id="role_doctor" name="role" value="doctor">
                    <label for="role_doctor">医生</label>

                    <input type="radio" id="role_admin" name="role" value="admin">
                    <label for="role_admin">管理员</label>
                </div>

                <label>手机号码</label>
                <input type="text" name="phone" placeholder="请输入注册手机号" required>

                <label>登录密码</label>
                <input type="password" name="password" placeholder="请输入密码" required>

                <div class="login-actions">
                    <button type="submit" class="btn btn--primary" style="width:100%;">登录</button>
                    <a class="btn btn--ghost" style="width:100%; margin-top:10px;" href="{{ url_for('auth.register') }}">患者注册</a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
